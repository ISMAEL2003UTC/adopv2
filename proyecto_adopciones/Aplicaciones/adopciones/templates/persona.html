{% extends './plantilla.html' %}
{% load static %}
{% block body %}


<h1> LISTA DE PERSONAS ADOPTANTES</h1>
<div class="mb-3">
    <a href="{% url 'nuevaPersona' %}" class="btn btn-success">
        <i class="fa fa-plus"></i> Agregar Nueva Persona
    </a>
</div>

<table class="table table-bordered" id="tbl_personas">
    <thead>
        <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Apellido</th>
            <th>Teléfono</th>
            <th>Email</th>
            <th>Dirección</th>
            <th>Imagen</th>
            <th>Acciones</th>
        </tr>
    </thead>

    <tbody>
        {% for personaTemporal in personas %}
            <tr>
                <td>{{ personaTemporal.id_persona  }}</td>   
                <td>{{ personaTemporal.nombre }}</td>
                <td>{{ personaTemporal.apellido }}</td>
                <td>{{ personaTemporal.telefono|default:"-" }}</td>
                <td>{{ personaTemporal.email|default:"-" }}</td>
                <td>{{ personaTemporal.direccion|default:"-" }}</td>
                <td>
                    <img src="{{ personaTemporal.imagen.url }}" alt="Foto" width="50" height="50" style="object-fit: cover; border-radius: 50%;">
                </td>
                
                <td>
                    <a href="{% url 'editarPersona' personaTemporal.id_persona %}" class="btn btn-primary">
                        <i class="fa-regular fa-pen-to-square"></i>
                    </a>
                    <button type="button" onclick="confirmarEliminacion('{{ personaTemporal.id_persona }}');" class="btn btn-danger">
                        <i class="fa fa-trash"></i>
                    </button>
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<script>
function confirmarEliminacion(id) {
    Swal.fire({
        title: '¿Estás seguro?',
        text: "¡No podrás revertir esto!",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Sí, eliminar',
        cancelButtonText: 'Cancelar'
    }).then((result) => {
        if (result.isConfirmed) {
            window.location.href = `/persona/eliminarPersona/${id}/`;
        }
    });
}
</script>


{% endblock %}