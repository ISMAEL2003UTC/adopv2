{% extends './plantilla.html' %}
{% load static %}

{% block body %}
<div class="row">
    <div class="col-md-3"></div>
    <div class="col-md-6 bg-light">
        <h1>EDITAR MASCOTA </h1>
        <form action="{% url 'actualizarMascota' mascotaEditar.id_mascota %}" id="form_mascota" 
      enctype="multipart/form-data" 
      method="post">

            {% csrf_token %}
            <input  type="hidden" name="id" id="id" value="{{mascotaEditar.id}}"><br>

            <label for="">Nombre</label><br>
            <input required placeholder="Ingrese el nombre de la mascota" class="form-control" type="text" name="nombre" id="nombre" value="{{mascotaEditar.nombre}}"><br>

            <label for="">Descripción</label><br>
            <input required placeholder="Ingrese la descripción" class="form-control" type="text" name="descripcion" id="descripcion" value="{{mascotaEditar.descripcion}}"><br>
            <label for="">Especie</label><br>
            <input required placeholder="Ingrese la especie" class="form-control" type="text" name="especie" id="especie" value="{{mascotaEditar.especie}}"><br>
            <label for="">Raza</label><br>
            <input required placeholder="Ingrese la raza" class="form-control" type="text" name="raza" id="raza" value="{{mascotaEditar.raza}}"><br>

            <label for="">Edad</label><br>
            <input required placeholder="Ingrese la edad" class="form-control" type="number" name="edad" id="edad" value="{{mascotaEditar.edad}}"><br>
            <label>Sexo</label>
            <select class="form-control" name="sexo">
                <option value="">Seleccione el sexo</option>
                <option value="Macho" {% if mascotaEditar.sexo == "Macho" %}selected{% endif %}>Macho</option>
                <option value="Hembra" {% if mascotaEditar.sexo == "Hembra" %}selected{% endif %}>Hembra</option>
            </select><br>
            <label for="">Color</label><br>
            <input required placeholder="Ingrese el color" class="form-control" type="text" name="color" id="color" value="{{mascotaEditar.color}}"><br>
            
            <label for="">Foto</label><br>
            {% if mascotaEditar.foto %}
                <img src="{{ mascotaEditar.foto.url }}" alt="Foto mascota" width="150"><br>
            {% endif %}
            <input class="form-control" type="file" name="foto" id="foto" accept=".jpg,.jpeg,.png"><br>

            <label>Estado</label>
            <select class="form-control" name="estado">
                <option value="">Seleccione el estado</option>
                <option value="Disponible" {% if mascotaEditar.estado == "Disponible" %}selected{% endif %}>Disponible</option>
                <option value="Adoptado" {% if mascotaEditar.estado == "Adoptado" %}selected{% endif %}>Adoptado</option>

            </select><br>

            

            

            
            <button
            class="btn btn-success" type="submit">Actualizar</button>
            <a 
            class="btn btn-outline-danger" href="/mascota">Cancelar</a>
        </form>
    
    </div>
    
</div>

<script>
$(document).ready(function() {
    $("#foto").fileinput({
        language: 'es',
        allowedFileExtensions: ['jpg', 'jpeg', 'png'],
        maxFileSize: 2048, // 2 MB
        showPreview: true,
        showUpload: false,
        showRemove: true,
        initialPreviewAsData: true,
        theme: 'fas'
    });
});
</script>
<script>
    $("#form_mascota").validate(
        {
            rules:{
                "nombre":{
                    required:true,
                    maxlength:20
                },
                "descripcion":{
                    required:true,
                    maxlength:30
                },
                
                "especie":{
                    required:true,
                    maxlength:20
                },
                "raza":{
                    required:true,
                    maxlength:20
                },
                edad: {
                    required: true,
                    number: true, 
                    min: 0,
                    max: 30,
                },
                "sexo":{
                    required:true,
                },
                "color":{
                    required:true,
                    maxlength:20
                },
                foto: {
                    required: false,
                    extension: "jpg|jpeg|png"
                },
                "estado":{
                    required:true,
                   
                },
                
            },
            messages:{
                "nombre":{
                    required:"Ingrese el nombre",
                    maxlength:"Máximo 20 letras"
                },
                "descripcion":{
                    required:"Ingrese la descripción",
                    maxlength:"Máximo 20 letras"
                },
                
                "especie":{
                    required:"Ingrese la especie",
                    maxlength:"Máximo 20 letras"
                },
                "raza":{
                    required:"Ingrese la raza",
                    maxlength:"Máximo 20 letras"
                },
                "edad":{
                    required:"Ingrese la edad",
                    number: "Ingrese un valor numérico",
                    min: "La edad no puede ser menor a 0",
                    max: "La edad máxima permitida es 30 años"
                },
                "sexo":{
                    required:"Seleccione el sexo",
                },
                "color":{
                    required:"Ingrese el color",
                    maxlength:"Máximo 20 letras"
                },
            
                "foto": {
                    required: "Seleccione una foto",
                    extension: "Solo se permiten imágenes .jpg, .jpeg o .png"
                },
                "estado":{
                    required:"Seleccione el estado",
                },
                
            }
        }
    ); 

</script>



{% endblock %}